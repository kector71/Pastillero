<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Filtro Cristal L√≠quido</title>
<style>
  body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    margin: 0;
    padding: 2rem;
    background: linear-gradient(135deg, #f0f0f0, #d9d9d9);
    min-height: 100vh;
    transition: background 0.3s ease;
  }
  body.dark {
    background: linear-gradient(135deg, #1a1a1a, #121212);
  }
  .glass {
    background-color: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(12px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 1rem;
    padding: 1rem;
    max-width: 600px;
    margin: 0 auto;
    transition: all 0.3s ease;
  }
  .filter-title {
    font-weight: 600;
    display: flex;
    align-items: center;
    margin-bottom: 0.5rem;
    color: #000;
  }
  body.dark .filter-title { color: #fff; }
  .form-input {
    width: 100%;
    padding: 0.5rem;
    border-radius: 0.5rem;
    border: 1px solid rgba(0,0,0,0.15);
    background-color: rgba(255,255,255,0.25);
    color: #000;
    transition: all 0.3s ease;
  }
  .form-input:focus {
    border-color: #2563eb;
    outline: none;
    background-color: rgba(255,255,255,0.4);
  }
  body.dark .form-input {
    background-color: rgba(0,0,0,0.25);
    color: #fff;
    border-color: rgba(255,255,255,0.2);
  }
  .position-btn {
    flex: 1;
    text-align: center;
    padding: 0.5rem;
    border-radius: 0.5rem;
    border: 1px solid rgba(0,0,0,0.15);
    background-color: rgba(255,255,255,0.25);
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 0.85rem;
    color: #000;
  }
  .position-btn.active {
    background-color: #dbeafe;
    border-color: #2563eb;
    color: #1d4ed8;
  }
  body.dark .position-btn {
    background-color: rgba(0,0,0,0.25);
    border-color: rgba(255,255,255,0.2);
    color: #fff;
  }
  body.dark .position-btn.active {
    background-color: #0a2463;
    border-color: #63b3ed;
    color: #fff;
  }
  .result-card {
    background-color: rgba(255,255,255,0.25);
    backdrop-filter: blur(10px);
    border-radius: 1rem;
    padding: 0.75rem;
    border: 1px solid rgba(255,255,255,0.3);
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    position: relative;
    transition: all 0.3s ease;
  }
  body.dark .result-card {
    background-color: rgba(0,0,0,0.25);
    border-color: rgba(255,255,255,0.2);
  }
  .result-field {
    flex: 1 1 45%;
    font-size: 0.8rem;
    color: #000;
  }
  body.dark .result-field { color: #fff; }
  .position-badge {
    display: inline-block;
    padding: 0.1rem 0.3rem;
    border-radius: 0.4rem;
    font-size: 0.65rem;
    font-weight: 500;
    margin-right: 0.25rem;
  }
  .position-delantera { background-color: #dbeafe; color: #1d4ed8; }
  .position-trasera { background-color: #fef2f2; color: #b91c1c; }
  body.dark .position-delantera { background-color: #0a2463; color: #63b3ed; }
  body.dark .position-trasera { background-color: #5a0a0a; color: #fca5a5; }
  .favorite-btn {
    position: absolute;
    top: 0.3rem;
    right: 0.3rem;
    width: 20px;
    height: 20px;
    cursor: pointer;
    opacity: 0.7;
    transition: all 0.2s ease;
  }
  .favorite-btn:hover { opacity: 1; transform: scale(1.2); }
  .toggle-dark {
    position: fixed;
    top: 1rem;
    right: 1rem;
    padding: 0.5rem 1rem;
    border-radius: 0.5rem;
    cursor: pointer;
    background-color: #2563eb;
    color: #fff;
    border: none;
  }
</style>
</head>
<body>

<button class="toggle-dark">üåô Modo Oscuro</button>

<div class="glass p-4">
  <!-- B√∫squeda r√°pida -->
  <div class="filter-title">
    üîç B√∫squeda r√°pida
  </div>
  <input type="text" id="busquedaRapida" placeholder="Marca, Modelo, Ref..." class="form-input">

  <!-- Medidas -->
  <div class="filter-title mt-4">
    üìè Medidas
  </div>
  <div style="display:flex; gap:0.5rem;">
    <input type="number" id="medidaAncho" placeholder="Ancho (mm)" step="0.1" class="form-input" style="flex:1">
    <input type="number" id="medidaAltura" placeholder="Altura (mm)" step="0.1" class="form-input" style="flex:1">
  </div>

  <!-- Posici√≥n -->
  <div style="display:flex; gap:0.5rem; margin-top:0.5rem;">
    <div class="position-btn" id="positionDelantera">Delantera</div>
    <div class="position-btn" id="positionTrasera">Trasera</div>
  </div>

  <!-- Resultados -->
  <div id="results-container" class="mt-4 space-y-2"></div>

  <!-- Conteo -->
  <div class="mt-2 text-xs text-gray-700 dark:text-gray-300">
    <span id="resultCount">0</span> resultados
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const els = {
    busqueda: document.getElementById('busquedaRapida'),
    ancho: document.getElementById('medidaAncho'),
    altura: document.getElementById('medidaAltura'),
    posDel: document.getElementById('positionDelantera'),
    posTras: document.getElementById('positionTrasera'),
    results: document.getElementById('results-container'),
    count: document.getElementById('resultCount')
  };

  let brakePadsData = [
    {marca:'A', modelo:'X', ref:'123', medidas:{ancho:100, altura:50}, posicion:'Delantera'},
    {marca:'B', modelo:'Y', ref:'456', medidas:{ancho:120, altura:60}, posicion:'Trasera'},
    {marca:'C', modelo:'Z', ref:'789', medidas:{ancho:100, altura:50}, posicion:'Delantera/Trasera'}
  ];

  const isFavorite = index => JSON.parse(localStorage.getItem('brakePadFavorites')||'[]').includes(index);
  const toggleFavorite = e => {
    const index = e.target.closest('.favorite-btn').dataset.id;
    let favs = JSON.parse(localStorage.getItem('brakePadFavorites')||'[]');
    if(favs.includes(Number(index))) favs = favs.filter(f=>f!=index);
    else favs.push(Number(index));
    localStorage.setItem('brakePadFavorites', JSON.stringify(favs));
    filterData();
  };

  const getPos = () =>
    els.posDel.classList.contains('active') && els.posTras.classList.contains('active') ? 'Ambas' :
    els.posDel.classList.contains('active') ? 'Delantera' :
    els.posTras.classList.contains('active') ? 'Trasera' : 'Todas';

  const filterData = () => {
    const filters = {
      busqueda: els.busqueda.value.toLowerCase().trim(),
      ancho: els.ancho.value ? parseFloat(els.ancho.value) : null,
      altura: els.altura.value ? parseFloat(els.altura.value) : null,
      pos: getPos()
    };

    const filtered = brakePadsData.filter((item, idx) => {
      const medidasMatch = (!filters.ancho || item.medidas.ancho===filters.ancho) &&
                           (!filters.altura || item.medidas.altura===filters.altura);
      const posMatch = filters.pos==='Todas' || filters.pos==='Ambas' ||
                       (filters.pos==='Delantera' && item.posicion.includes('Del')) ||
                       (filters.pos==='Trasera' && item.posicion.includes('Tras'));
      const busqMatch = !filters.busqueda || 
                        item.marca.toLowerCase().includes(filters.busqueda) ||
                        item.modelo.toLowerCase().includes(filters.busqueda) ||
                        item.ref.toLowerCase().includes(filters.busqueda);
      return medidasMatch && posMatch && busqMatch;
    });

    els.count.textContent = filtered.length;
    els.results.innerHTML = filtered.map((item, idx) => {
      const posBadge = item.posicion.includes('Del') ? '<span class="position-badge position-delantera">Delantera</span>':'';
      const posBadge2 = item.posicion.includes('Tras') ? '<span class="position-badge position-trasera">Trasera</span>':'';
      const fav = isFavorite(idx);
      return `
        <div class="result-card">
          <svg class="favorite-btn" data-id="${idx}" xmlns="http://www.w3.org/2000/svg" fill="${fav?'currentColor':'none'}" stroke="${fav?'none':'currentColor'}" viewBox="0 0 24 24" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 21l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.18L12 21z"/>
          </svg>
          <div class="result-field"><strong>Marca:</strong> ${item.marca}</div>
          <div class="result-field"><strong>Modelo:</strong> ${item.modelo}</div>
          <div class="result-field"><strong>Ref:</strong> ${item.ref}</div>
          <div class="result-field"><strong>Ancho:</strong> ${item.medidas.ancho} mm</div>
          <div class="result-field"><strong>Altura:</strong> ${item.medidas.altura} mm</div>
          <div class="result-field">${posBadge}${posBadge2}</div>
        </div>
      `;
    }).join('');

    document.querySelectorAll('.favorite-btn').forEach(btn => btn.addEventListener('click', toggleFavorite));
  };

  [els.busqueda, els.ancho, els.altura].forEach(i => i.addEventListener('input', filterData));
  [els.posDel, els.posTras].forEach(btn => btn.addEventListener('click', () => {
    btn.classList.toggle('active');
    filterData();
  }));

  document.querySelector('.toggle-dark').addEventListener('click', () => {
    document.body.classList.toggle('dark');
  });

  filterData();
});
</script>

</body>
</html>