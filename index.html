<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RepuestosYa - Consulta de repuestos</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            scroll-behavior: smooth;
        }
        
        .search-card {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }
        
        .search-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(229, 231, 235, 0.2);
        }
        
        .filter-select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid rgba(229, 231, 235, 0.8);
            border-radius: 0.5rem;
            background-color: rgba(255, 255, 255, 0.9);
            font-size: 0.875rem;
            transition: all 0.2s ease;
        }
        
        .filter-select:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        .btn-primary, .btn-secondary, .btn-danger, .btn-success {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 0.5rem;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s ease;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-size: 0.875rem;
        }
        
        .btn-primary {
            background-color: #000000;
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #1a1a1a;
            transform: scale(1.02);
        }
        
        .btn-secondary {
            background-color: #f3f4f6;
            color: #4b5563;
        }
        
        .btn-secondary:hover {
            background-color: #e5e7eb;
            transform: scale(1.02);
        }
        
        .btn-danger {
            background-color: #ef4444;
            color: white;
        }
        
        .btn-danger:hover {
            background-color: #dc2626;
            transform: scale(1.02);
        }
        
        .btn-success {
            background-color: #10b981;
            color: white;
        }
        
        .btn-success:hover {
            background-color: #059669;
            transform: scale(1.02);
        }
        
        .admin-dashboard {
            min-height: 100vh;
            padding: 2rem 0;
        }
        
        .tab-container {
            margin-bottom: 1rem;
        }
        
        .tabs {
            display: flex;
            overflow-x: auto;
            border-bottom: 1px solid #e5e7eb;
            margin-bottom: 1rem;
            gap: 1.5rem;
        }
        
        .tab {
            padding: 0.75rem 0;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            font-weight: 500;
            color: #6b7280;
            transition: all 0.2s ease;
        }
        
        .tab.active {
            border-bottom: 2px solid #000000;
            color: #000000;
            font-weight: 600;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .list-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            margin-bottom: 0.5rem;
            transition: all 0.2s ease;
        }
        
        .list-item:hover {
            background-color: #f9fafb;
            transform: translateX(2px);
            border-color: #d1d5db;
        }
        
        .mobile-only {
            display: none;
        }
        
        .desktop-only {
            display: block;
        }
        
        .hero-gradient {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
        }
        
        .result-image {
            border-radius: 1rem;
            overflow: hidden;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            transition: transform 0.3s ease;
        }
        
        .result-image:hover {
            transform: scale(1.02);
        }
        
        .info-card {
            border-radius: 1rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }
        
        .info-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 1rem;
            border-radius: 0.5rem;
            background-color: #10b981;
            color: white;
            z-index: 1000;
            opacity: 0;
            transform: translateY(-20px);
            transition: all 0.3s ease;
        }
        
        .notification.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        .notification.error {
            background-color: #ef4444;
        }
        
        @media (max-width: 640px) {
            .mobile-only {
                display: block;
            }
            
            .desktop-only {
                display: none;
            }
            
            .filter-item {
                flex: 1 1 100%;
            }
            
            .btn-primary, .btn-secondary {
                width: 100%;
                margin-top: 0.5rem;
            }
            
            .p-8 {
                padding: 1.5rem;
            }
            
            .py-16 {
                padding-top: 4rem;
                padding-bottom: 4rem;
            }
            
            .container {
                padding-left: 1rem;
                padding-right: 1rem;
            }
            
            .text-2xl {
                font-size: 1.5rem;
            }
            
            .text-xl {
                font-size: 1.25rem;
            }
            
            .hero-gradient {
                background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            }
        }
    </style>
</head>
<body class="bg-white min-h-screen">
    <!-- Header -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center">
                    <div class="w-8 h-8 bg-gradient-to-r from-blue-500 to-blue-700 rounded-lg flex items-center justify-center mr-3">
                        <i class="fas fa-tools text-white text-sm"></i>
                    </div>
                    <h1 class="text-xl font-semibold text-gray-900">RepuestosYa</h1>
                </div>
                <button id="adminToggleBtn" class="text-gray-600 hover:text-gray-900 px-3 py-1 rounded-lg transition-colors text-sm flex items-center border border-gray-300">
                    <i class="fas fa-user-shield mr-1"></i> 
                    <span class="desktop-only">Administrador</span>
                    <span class="mobile-only">Admin</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Login Page -->
    <div id="loginPage" class="container mx-auto px-4 py-12 hidden">
        <div class="max-w-md mx-auto glass-effect rounded-2xl p-8">
            <div class="text-center mb-8">
                <div class="w-16 h-16 bg-gradient-to-r from-blue-500 to-blue-700 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-user-shield text-white text-2xl"></i>
                </div>
                <h2 class="text-2xl font-semibold text-gray-900 mb-2">Acceso Administrador</h2>
                <p class="text-gray-600">Inicia sesión para gestionar el sistema</p>
            </div>
            <form id="loginForm" class="space-y-4">
                <div class="space-y-2">
                    <label class="text-sm font-medium text-gray-700" for="username">Usuario</label>
                    <input type="text" id="username" class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                </div>
                <div class="space-y-2">
                    <label class="text-sm font-medium text-gray-700" for="password">Contraseña</label>
                    <input type="password" id="password" class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                </div>
                <div class="pt-2">
                    <button type="submit" class="w-full bg-black hover:bg-gray-800 text-white font-medium py-3 px-4 rounded-xl transition-colors">
                        Iniciar Sesión
                    </button>
                </div>
            </form>
            <div class="mt-6 text-center">
                <button id="backToMain" class="text-blue-600 hover:text-blue-800 text-sm font-medium">
                    Volver al sitio principal
                </button>
            </div>
        </div>
    </div>

    <!-- Admin Dashboard -->
    <div id="adminDashboard" class="hidden admin-dashboard">
        <div class="container mx-auto px-4 py-8">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-2xl font-semibold text-gray-900">Panel de Administración</h2>
                <button id="logoutBtn" class="bg-gray-100 hover:bg-gray-200 text-gray-800 px-4 py-2 rounded-xl transition-colors text-sm flex items-center">
                    <i class="fas fa-sign-out-alt mr-2"></i> Cerrar Sesión
                </button>
            </div>
            
            <div class="glass-effect rounded-2xl p-6">
                <!-- Tabs -->
                <div class="tab-container">
                    <div class="tabs">
                        <div class="tab active" data-tab="repuestos">Repuestos</div>
                        <div class="tab" data-tab="categorias">Categorías</div>
                        <div class="tab" data-tab="marcas">Marcas</div>
                        <div class="tab" data-tab="modelos">Modelos</div>
                        <div class="tab" data-tab="anios">Años</div>
                    </div>
                    
                    <!-- Tab Content -->
                    <div id="repuestos" class="tab-content active">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                            <div>
                                <h3 class="text-xl font-semibold mb-6 text-gray-900">Agregar Nuevo Repuesto</h3>
                                <form id="addRepuestoForm" class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2" for="categoriaAdmin">Categoría</label>
                                        <select id="categoriaAdmin" class="filter-select" required></select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2" for="marcaAdmin">Marca</label>
                                        <select id="marcaAdmin" class="filter-select" required></select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2" for="modeloAdmin">Modelo</label>
                                        <select id="modeloAdmin" class="filter-select" required></select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2" for="anioAdmin">Año</label>
                                        <select id="anioAdmin" class="filter-select" required></select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2" for="nombreRepuesto">Nombre del Repuesto</label>
                                        <input type="text" id="nombreRepuesto" class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2" for="descripcionRepuesto">Descripción</label>
                                        <textarea id="descripcionRepuesto" rows="3" class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required></textarea>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2" for="imagenRepuesto">URL de la Imagen</label>
                                        <input type="url" id="imagenRepuesto" class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="https://ejemplo.com/imagen.jpg" required>
                                    </div>
                                    <div class="pt-2">
                                        <button type="submit" class="w-full bg-black hover:bg-gray-800 text-white font-medium py-3 px-4 rounded-xl transition-colors">
                                            <i class="fas fa-plus mr-2"></i> Agregar Repuesto
                                        </button>
                                    </div>
                                </form>
                            </div>
                            
                            <div>
                                <h3 class="text-xl font-semibold mb-6 text-gray-900">Repuestos Registrados</h3>
                                <div id="repuestosList" class="bg-white rounded-xl p-4 h-96 overflow-y-auto border border-gray-200">
                                    <p class="text-gray-500 text-center mt-8">No hay repuestos registrados</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Categorias Tab -->
                    <div id="categorias" class="tab-content">
                        <div class="flex flex-col sm:flex-row gap-3 mb-6">
                            <input type="text" id="nuevaCategoria" placeholder="Nueva categoría" class="flex-1 p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            <button id="agregarCategoria" class="btn-success whitespace-nowrap">
                                <i class="fas fa-plus mr-2"></i> Agregar
                            </button>
                        </div>
                        <div id="categoriasList" class="space-y-3">
                            <!-- Categorias se cargarán aquí -->
                        </div>
                    </div>
                    
                    <!-- Marcas Tab -->
                    <div id="marcas" class="tab-content">
                        <div class="flex flex-col sm:flex-row gap-3 mb-6">
                            <input type="text" id="nuevaMarca" placeholder="Nueva marca" class="flex-1 p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            <button id="agregarMarca" class="btn-success whitespace-nowrap">
                                <i class="fas fa-plus mr-2"></i> Agregar
                            </button>
                        </div>
                        <div id="marcasList" class="space-y-3">
                            <!-- Marcas se cargarán aquí -->
                        </div>
                    </div>
                    
                    <!-- Modelos Tab -->
                    <div id="modelos" class="tab-content">
                        <div class="mb-6">
                            <select id="marcaModelo" class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 mb-3">
                                <option value="">Selecciona una marca</option>
                            </select>
                            <div class="flex flex-col sm:flex-row gap-3">
                                <input type="text" id="nuevoModelo" placeholder="Nuevo modelo" class="flex-1 p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                <button id="agregarModelo" class="btn-success whitespace-nowrap">
                                    <i class="fas fa-plus mr-2"></i> Agregar
                                </button>
                            </div>
                        </div>
                        <div id="modelosList" class="space-y-3">
                            <!-- Modelos se cargarán aquí -->
                        </div>
                    </div>
                    
                    <!-- Años Tab -->
                    <div id="anios" class="tab-content">
                        <div class="flex flex-col sm:flex-row gap-3 mb-6">
                            <input type="number" id="nuevoAnio" placeholder="Nuevo año" class="flex-1 p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            <button id="agregarAnio" class="btn-success whitespace-nowrap">
                                <i class="fas fa-plus mr-2"></i> Agregar
                            </button>
                        </div>
                        <div id="aniosList" class="space-y-3">
                            <!-- Años se cargarán aquí -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div id="mainContent">
        <!-- Hero Section -->
        <section class="hero-gradient py-16 md:py-24">
            <div class="container mx-auto px-4 text-center">
                <h2 class="text-3xl md:text-4xl lg:text-5xl font-semibold text-gray-900 mb-6 leading-tight">
                    Consulta repuestos para tu vehículo
                </h2>
                <p class="text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed">
                    Encuentra información precisa sobre repuestos compatibles con tu vehículo. 
                    Base de datos actualizada y referencias visuales de alta calidad.
                </p>
            </div>
        </section>

        <!-- Search Section -->
        <section class="py-16">
            <div class="container mx-auto px-4">
                <div class="max-w-4xl mx-auto glass-effect rounded-2xl p-8">
                    <h3 class="text-2xl font-semibold text-gray-900 mb-8 text-center">Consulta tu repuesto</h3>
                    
                    <div class="space-y-6">
                        <!-- Filter Group -->
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Categoría</label>
                                <select id="categoria" class="filter-select">
                                    <option value="">Todas las categorías</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Marca</label>
                                <select id="marca" class="filter-select">
                                    <option value="">Todas las marcas</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Modelo</label>
                                <select id="modelo" class="filter-select" disabled>
                                    <option value="">Todos los modelos</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Año</label>
                                <select id="anio" class="filter-select">
                                    <option value="">Todos los años</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- Search Input -->
                        <div class="flex flex-col sm:flex-row gap-4">
                            <input type="text" id="buscarInput" placeholder="Buscar por nombre..." class="flex-1 p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500" />
                            <div class="grid grid-cols-2 gap-3 w-full sm:w-auto">
                                <button id="buscarBtn" class="btn-primary">
                                    <i class="fas fa-search mr-2"></i> Buscar
                                </button>
                                <button id="limpiarBtn" class="btn-secondary">
                                    <i class="fas fa-eraser mr-2"></i> Limpiar
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Results Section -->
        <section id="resultados" class="py-16 bg-gray-50 hidden">
            <div class="container mx-auto px-4">
                <h3 class="text-2xl font-semibold text-gray-900 mb-8 text-center">Información para <span id="busquedaTitulo" class="text-blue-600 font-medium"></span></h3>
                
                <div class="max-w-4xl mx-auto info-card bg-white p-8">
                    <div id="resultadosLista" class="space-y-6">
                        <!-- Resultados se cargarán aquí -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Features Section -->
        <section class="py-16">
            <div class="container mx-auto px-4">
                <div class="text-center mb-12">
                    <h3 class="text-2xl font-semibold text-gray-900 mb-4">Características Principales</h3>
                    <p class="text-gray-600 max-w-2xl mx-auto">Nuestro sistema ofrece una experiencia de consulta completa y precisa</p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto">
                    <div class="text-center p-6">
                        <div class="w-16 h-16 bg-gradient-to-r from-blue-500 to-blue-700 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-database text-white text-2xl"></i>
                        </div>
                        <h4 class="text-xl font-semibold text-gray-900 mb-3">Base de Datos Completa</h4>
                        <p class="text-gray-600 leading-relaxed">Información detallada sobre repuestos compatibles con tu vehículo, actualizada constantemente.</p>
                    </div>
                    
                    <div class="text-center p-6">
                        <div class="w-16 h-16 bg-gradient-to-r from-blue-500 to-blue-700 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-image text-white text-2xl"></i>
                        </div>
                        <h4 class="text-xl font-semibold text-gray-900 mb-3">Imágenes de Referencia</h4>
                        <p class="text-gray-600 leading-relaxed">Visualiza cómo se ve el repuesto con imágenes de alta calidad y resolución.</p>
                    </div>
                    
                    <div class="text-center p-6">
                        <div class="w-16 h-16 bg-gradient-to-r from-blue-500 to-blue-700 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-sync-alt text-white text-2xl"></i>
                        </div>
                        <h4 class="text-xl font-semibold text-gray-900 mb-3">Actualización Continua</h4>
                        <p class="text-gray-600 leading-relaxed">Nuestro sistema se actualiza constantemente con nuevos repuestos y modelos.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="bg-gray-900 text-white py-12">
            <div class="container mx-auto px-4">
                <div class="text-center">
                    <div class="flex items-center justify-center mb-4">
                        <div class="w-8 h-8 bg-gradient-to-r from-blue-500 to-blue-700 rounded-lg flex items-center justify-center mr-3">
                            <i class="fas fa-tools text-white text-sm"></i>
                        </div>
                        <h3 class="text-xl font-semibold">RepuestosYa</h3>
                    </div>
                    <p class="text-gray-400 mb-6 max-w-lg mx-auto">
                        Tu sistema de consulta de repuestos automotrices. Información precisa y actualizada para profesionales y entusiastas.
                    </p>
                    <div class="border-t border-gray-800 pt-6 text-gray-400 text-sm">
                        <p>&copy; 2024 RepuestosYa. Todos los derechos reservados.</p>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <!-- Notification -->
    <div id="notification" class="notification hidden">
        Acción realizada correctamente
    </div>

    <script>
        // Sistema de autenticación mejorado
        const auth = {
            isLoggedIn: false,
            user: null,
            
            login: function(username, password) {
                if (username === 'admin' && password === 'admin123') {
                    this.isLoggedIn = true;
                    this.user = { username: username, role: 'admin' };
                    return true;
                }
                return false;
            },
            
            logout: function() {
                this.isLoggedIn = false;
                this.user = null;
            },
            
            checkAuth: function() {
                return this.isLoggedIn;
            }
        };

        // Notificaciones mejoradas
        function showNotification(message, isError = false) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${isError ? 'error' : ''}`;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Persistencia de datos
        function saveData() {
            localStorage.setItem('repuestosDB', JSON.stringify(repuestosDB));
            localStorage.setItem('categorias', JSON.stringify(categorias));
            localStorage.setItem('marcas', JSON.stringify(marcas));
            localStorage.setItem('modelos', JSON.stringify(modelos));
            localStorage.setItem('anios', JSON.stringify(anios));
        }

        function loadData() {
            const savedRepuestos = localStorage.getItem('repuestosDB');
            const savedCategorias = localStorage.getItem('categorias');
            const savedMarcas = localStorage.getItem('marcas');
            const savedModelos = localStorage.getItem('modelos');
            const savedAnios = localStorage.getItem('anios');
            
            if (savedRepuestos) repuestosDB = JSON.parse(savedRepuestos);
            if (savedCategorias) categorias = JSON.parse(savedCategorias);
            if (savedMarcas) marcas = JSON.parse(savedMarcas);
            if (savedModelos) modelos = JSON.parse(savedModelos);
            if (savedAnios) anios = JSON.parse(savedAnios);
        }

        // Datos iniciales
        let categorias = ['pastilla-freno', 'disco-freno', 'pinza-freno', 'kit-freno'];
        let marcas = ['toyota', 'honda', 'ford', 'chevrolet', 'nissan', 'volkswagen', 'hyundai', 'kia', 'mazda', 'subaru'];
        let modelos = {
            toyota: ['camry', 'corolla', 'rav4', 'prius', 'highlander'],
            honda: ['civic', 'accord', 'cr-v', 'pilot', 'odyssey'],
            ford: ['focus', 'fusion', 'escape', 'explorer', 'f-150'],
            chevrolet: ['cruze', 'malibu', 'equinox', 'tahoe', 'silverado'],
            nissan: ['sentra', 'altima', 'rogue', 'pathfinder', 'frontier'],
            volkswagen: ['jetta', 'golf', 'tiguan', 'passat', 'atlas'],
            hyundai: ['elantra', 'sonata', 'tucson', 'santa-fe', 'kona'],
            kia: ['forte', 'optima', 'sorento', 'sportage', 'telluride'],
            mazda: ['mazda3', 'mazda6', 'cx-5', 'cx-9', 'mx-5'],
            subaru: ['impreza', 'legacy', 'outback', 'forester', 'ascent']
        };
        let anios = [];
        
        const currentYear = new Date().getFullYear();
        for (let year = currentYear; year >= currentYear - 30; year--) {
            anios.push(year);
        }

        let repuestosDB = [
            {
                id: 1,
                categoria: 'pastilla-freno',
                marca: 'toyota',
                modelo: 'camry',
                anio: 2022,
                nombre: 'Pastillas de Freno Delanteras',
                descripcion: 'Pastillas de freno delanteras de alta calidad para Toyota Camry 2022. Diseñadas para ofrecer un frenado suave y eficiente con bajo nivel de ruido.',
                imagen: 'https://placehold.co/600x400/6366f1/FFFFFF?text=Pastillas+Toyota+Camry'
            },
            {
                id: 2,
                categoria: 'pastilla-freno',
                marca: 'honda',
                modelo: 'civic',
                anio: 2021,
                nombre: 'Pastillas de Freno Traseras',
                descripcion: 'Pastillas de freno traseras para Honda Civic 2021. Fabricadas con materiales de fricción avanzados para una mayor durabilidad y rendimiento.',
                imagen: 'https://placehold.co/600x400/8b5cf6/FFFFFF?text=Pastillas+Honda+Civic'
            },
            {
                id: 3,
                categoria: 'pastilla-freno',
                marca: 'ford',
                modelo: 'focus',
                anio: 2020,
                nombre: 'Kit de Pastillas de Freno (Delanteras)',
                descripcion: 'Kit completo de pastillas de freno delanteras para Ford Focus 2020. Incluye pastillas, sensores de desgaste y hardware de instalación.',
                imagen: 'https://placehold.co/600x400/059669/FFFFFF?text=Kit+Pastillas+Ford+Focus'
            },
            {
                id: 4,
                categoria: 'pastilla-freno',
                marca: 'chevrolet',
                modelo: 'malibu',
                anio: 2019,
                nombre: 'Pastillas de Freno Cerámicas',
                descripcion: 'Pastillas de freno cerámicas de alto rendimiento para Chevrolet Malibu 2019. Reducen el polvo en las llantas y ofrecen un frenado suave.',
                imagen: 'https://placehold.co/600x400/dc2626/FFFFFF?text=Pastillas+Cerámicas+Chevy'
            }
        ];

        // Cargar datos
        loadData();

        // Llenar selects
        function llenarSelects() {
            const categoriaSelect = document.getElementById('categoria');
            categoriaSelect.innerHTML = '<option value="">Todas las categorías</option>';
            categorias.forEach(categoria => {
                const option = document.createElement('option');
                option.value = categoria;
                option.textContent = categoria.split('-').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ');
                categoriaSelect.appendChild(option);
            });

            const marcaSelect = document.getElementById('marca');
            marcaSelect.innerHTML = '<option value="">Todas las marcas</option>';
            marcas.forEach(marca => {
                const option = document.createElement('option');
                option.value = marca;
                option.textContent = marca.charAt(0).toUpperCase() + marca.slice(1);
                marcaSelect.appendChild(option);
            });

            const anioSelect = document.getElementById('anio');
            anioSelect.innerHTML = '<option value="">Todos los años</option>';
            anios.forEach(anio => {
                const option = document.createElement('option');
                option.value = anio;
                option.textContent = anio;
                anioSelect.appendChild(option);
            });
        }

        // Actualizar modelos
        document.getElementById('marca').addEventListener('change', function() {
            const modeloSelect = document.getElementById('modelo');
            const marca = this.value;
            
            modeloSelect.innerHTML = '<option value="">Todos los modelos</option>';
            
            if (marca && modelos[marca]) {
                modeloSelect.disabled = false;
                modelos[marca].forEach(modelo => {
                    const option = document.createElement('option');
                    option.value = modelo;
                    option.textContent = modelo.charAt(0).toUpperCase() + modelo.slice(1);
                    modeloSelect.appendChild(option);
                });
            } else {
                modeloSelect.disabled = true;
            }
        });

        // Toggle entre páginas
        document.getElementById('adminToggleBtn').addEventListener('click', function() {
            if (auth.checkAuth()) {
                document.getElementById('mainContent').classList.add('hidden');
                document.getElementById('adminDashboard').classList.remove('hidden');
                cargarTablas();
                actualizarSelectsAdmin();
            } else {
                document.getElementById('mainContent').classList.add('hidden');
                document.getElementById('loginPage').classList.remove('hidden');
            }
        });

        document.getElementById('backToMain').addEventListener('click', function() {
            document.getElementById('loginPage').classList.add('hidden');
            document.getElementById('mainContent').classList.remove('hidden');
        });

        // Iniciar sesión
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            if (auth.login(username, password)) {
                document.getElementById('loginPage').classList.add('hidden');
                document.getElementById('adminDashboard').classList.remove('hidden');
                llenarSelects();
                cargarTablas();
                actualizarSelectsAdmin();
                loadRepuestosList();
                actualizarSelectsRepuestos();
                showNotification('Inicio de sesión exitoso');
            } else {
                showNotification('Usuario o contraseña incorrectos', true);
            }
        });

        // Cerrar sesión
        document.getElementById('logoutBtn').addEventListener('click', function() {
            if (confirm('¿Estás seguro de que deseas cerrar sesión?')) {
                auth.logout();
                document.getElementById('adminDashboard').classList.add('hidden');
                document.getElementById('mainContent').classList.remove('hidden');
                showNotification('Sesión cerrada correctamente');
            }
        });

        // Cambiar entre pestañas
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', function() {
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                this.classList.add('active');
                const tabId = this.getAttribute('data-tab');
                document.getElementById(tabId).classList.add('active');
            });
        });

        // Funciones para agregar elementos
        document.getElementById('agregarCategoria').addEventListener('click', function() {
            const nuevaCategoria = document.getElementById('nuevaCategoria').value.trim();
            if (nuevaCategoria === '') {
                showNotification('Por favor ingresa un nombre para la categoría', true);
                return;
            }
            
            const categoriaNormalizada = nuevaCategoria.toLowerCase().replace(/\s+/g, '-');
            if (categorias.includes(categoriaNormalizada)) {
                showNotification('Esta categoría ya existe', true);
                return;
            }
            
            categorias.push(categoriaNormalizada);
            document.getElementById('nuevaCategoria').value = '';
            cargarTablas();
            actualizarSelectsAdmin();
            llenarSelects();
            saveData();
            showNotification('Categoría agregada correctamente');
        });

        document.getElementById('agregarMarca').addEventListener('click', function() {
            const nuevaMarca = document.getElementById('nuevaMarca').value.trim();
            if (nuevaMarca === '') {
                showNotification('Por favor ingresa un nombre para la marca', true);
                return;
            }
            
            const marcaNormalizada = nuevaMarca.toLowerCase();
            if (marcas.includes(marcaNormalizada)) {
                showNotification('Esta marca ya existe', true);
                return;
            }
            
            marcas.push(marcaNormalizada);
            modelos[marcaNormalizada] = [];
            document.getElementById('nuevaMarca').value = '';
            cargarTablas();
            actualizarSelectsAdmin();
            llenarSelects();
            saveData();
            showNotification('Marca agregada correctamente');
        });

        document.getElementById('agregarModelo').addEventListener('click', function() {
            const marcaSeleccionada = document.getElementById('marcaModelo').value;
            const nuevoModelo = document.getElementById('nuevoModelo').value.trim();
            
            if (marcaSeleccionada === '') {
                showNotification('Por favor selecciona una marca', true);
                return;
            }
            
            if (nuevoModelo === '') {
                showNotification('Por favor ingresa un nombre para el modelo', true);
                return;
            }
            
            const modeloNormalizado = nuevoModelo.toLowerCase();
            if (modelos[marcaSeleccionada].includes(modeloNormalizado)) {
                showNotification('Este modelo ya existe para esta marca', true);
                return;
            }
            
            modelos[marcaSeleccionada].push(modeloNormalizado);
            document.getElementById('nuevoModelo').value = '';
            cargarTablas();
            actualizarSelectsAdmin();
            llenarSelects();
            saveData();
            showNotification('Modelo agregado correctamente');
        });

        document.getElementById('agregarAnio').addEventListener('click', function() {
            const nuevoAnio = parseInt(document.getElementById('nuevoAnio').value);
            const currentYear = new Date().getFullYear();
            
            if (isNaN(nuevoAnio) || nuevoAnio < 1990 || nuevoAnio > currentYear + 5) {
                showNotification('Por favor ingresa un año válido', true);
                return;
            }
            
            if (anios.includes(nuevoAnio)) {
                showNotification('Este año ya existe', true);
                return;
            }
            
            anios.push(nuevoAnio);
            anios.sort((a, b) => b - a);
            document.getElementById('nuevoAnio').value = '';
            cargarTablas();
            actualizarSelectsAdmin();
            llenarSelects();
            saveData();
            showNotification('Año agregado correctamente');
        });

        // Eliminar elementos
        window.eliminarCategoria = function(id) {
            if (confirm('¿Estás seguro de que deseas eliminar esta categoría?')) {
                categorias = categorias.filter((_, index) => index !== id);
                cargarTablas();
                actualizarSelectsAdmin();
                llenarSelects();
                saveData();
                showNotification('Categoría eliminada correctamente');
            }
        }

        window.eliminarMarca = function(id) {
            if (confirm('¿Estás seguro de que deseas eliminar esta marca?')) {
                const marcaAEliminar = marcas[id];
                marcas = marcas.filter((_, index) => index !== id);
                delete modelos[marcaAEliminar];
                cargarTablas();
                actualizarSelectsAdmin();
                llenarSelects();
                saveData();
                showNotification('Marca eliminada correctamente');
            }
        }

        window.eliminarModelo = function(marca, id) {
            if (confirm('¿Estás seguro de que deseas eliminar este modelo?')) {
                modelos[marca] = modelos[marca].filter((_, index) => index !== id);
                cargarTablas();
                actualizarSelectsAdmin();
                llenarSelects();
                saveData();
                showNotification('Modelo eliminado correctamente');
            }
        }

        window.eliminarAnio = function(id) {
            if (confirm('¿Estás seguro de que deseas eliminar este año?')) {
                anios = anios.filter((_, index) => index !== id);
                cargarTablas();
                actualizarSelectsAdmin();
                llenarSelects();
                saveData();
                showNotification('Año eliminado correctamente');
            }
        }

        // Cargar tablas
        function cargarTablas() {
            const categoriasList = document.getElementById('categoriasList');
            categoriasList.innerHTML = '';
            categorias.forEach((categoria, index) => {
                const item = document.createElement('div');
                item.className = 'list-item';
                item.innerHTML = `
                    <span class="font-medium">${categoria.split('-').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ')}</span>
                    <button onclick="eliminarCategoria(${index})" class="btn-danger text-sm font-medium">
                        <i class="fas fa-trash mr-1"></i> Eliminar
                    </button>
                `;
                categoriasList.appendChild(item);
            });

            const marcasList = document.getElementById('marcasList');
            marcasList.innerHTML = '';
            marcas.forEach((marca, index) => {
                const item = document.createElement('div');
                item.className = 'list-item';
                item.innerHTML = `
                    <span class="font-medium">${marca.charAt(0).toUpperCase() + marca.slice(1)}</span>
                    <button onclick="eliminarMarca(${index})" class="btn-danger text-sm font-medium">
                        <i class="fas fa-trash mr-1"></i> Eliminar
                    </button>
                `;
                marcasList.appendChild(item);
            });

            const modelosList = document.getElementById('modelosList');
            modelosList.innerHTML = '';
            Object.keys(modelos).forEach(marca => {
                if (modelos[marca].length > 0) {
                    const marcaHeader = document.createElement('div');
                    marcaHeader.className = 'font-semibold text-gray-800 mb-3 mt-4 text-sm uppercase tracking-wide text-gray-500';
                    marcaHeader.textContent = `${marca.charAt(0).toUpperCase() + marca.slice(1)}`;
                    modelosList.appendChild(marcaHeader);
                    
                    modelos[marca].forEach((modelo, index) => {
                        const item = document.createElement('div');
                        item.className = 'list-item ml-2';
                        item.innerHTML = `
                            <span>${modelo.charAt(0).toUpperCase() + modelo.slice(1)}</span>
                            <button onclick="eliminarModelo('${marca}', ${index})" class="btn-danger text-sm font-medium">
                                <i class="fas fa-trash mr-1"></i> Eliminar
                            </button>
                        `;
                        modelosList.appendChild(item);
                    });
                }
            });

            const aniosList = document.getElementById('aniosList');
            aniosList.innerHTML = '';
            anios.forEach((anio, index) => {
                const item = document.createElement('div');
                item.className = 'list-item';
                item.innerHTML = `
                    <span class="font-medium">${anio}</span>
                    <button onclick="eliminarAnio(${index})" class="btn-danger text-sm font-medium">
                        <i class="fas fa-trash mr-1"></i> Eliminar
                    </button>
                `;
                aniosList.appendChild(item);
            });
        }

        // Actualizar selects en el panel de administración
        function actualizarSelectsAdmin() {
            const marcaModeloSelect = document.getElementById('marcaModelo');
            marcaModeloSelect.innerHTML = '<option value="">Selecciona una marca</option>';
            marcas.forEach(marca => {
                const option = document.createElement('option');
                option.value = marca;
                option.textContent = marca.charAt(0).toUpperCase() + marca.slice(1);
                marcaModeloSelect.appendChild(option);
            });
        }

        // Agregar nuevo repuesto
        document.getElementById('addRepuestoForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const categoria = document.getElementById('categoriaAdmin').value;
            const marca = document.getElementById('marcaAdmin').value;
            const modelo = document.getElementById('modeloAdmin').value;
            const anio = parseInt(document.getElementById('anioAdmin').value);
            const nombre = document.getElementById('nombreRepuesto').value;
            const descripcion = document.getElementById('descripcionRepuesto').value;
            const imagen = document.getElementById('imagenRepuesto').value;
            
            if (!categoria || !marca || !modelo || !anio || !nombre || !descripcion || !imagen) {
                showNotification('Por favor completa todos los campos', true);
                return;
            }
            
            if (!anios.includes(anio)) {
                showNotification('El año seleccionado no está en la lista de años', true);
                return;
            }
            
            const nuevoRepuesto = {
                id: repuestosDB.length > 0 ? Math.max(...repuestosDB.map(r => r.id)) + 1 : 1,
                categoria,
                marca,
                modelo,
                anio,
                nombre,
                descripcion,
                imagen
            };
            
            repuestosDB.push(nuevoRepuesto);
            this.reset();
            loadRepuestosList();
            saveData();
            showNotification('Repuesto agregado correctamente');
        });

        // Cargar lista de repuestos
        function loadRepuestosList() {
            const lista = document.getElementById('repuestosList');
            if (repuestosDB.length === 0) {
                lista.innerHTML = '<p class="text-gray-500 text-center mt-8">No hay repuestos registrados</p>';
                return;
            }
            
            lista.innerHTML = '';
            repuestosDB.sort((a, b) => a.marca.localeCompare(b.marca) || a.modelo.localeCompare(b.modelo) || b.anio - a.anio);
            
            repuestosDB.forEach(repuesto => {
                const item = document.createElement('div');
                item.className = 'border-b border-gray-200 pb-6 mb-6 last:border-b-0';
                item.innerHTML = `
                    <div class="flex justify-between items-start mb-3">
                        <h4 class="font-semibold text-gray-900">${repuesto.nombre}</h4>
                        <button onclick="eliminarRepuesto(${repuesto.id})" class="btn-danger text-sm font-medium">
                            <i class="fas fa-trash mr-1"></i> Eliminar
                        </button>
                    </div>
                    <p class="text-sm text-gray-600 mb-2">
                        <span class="font-medium">Vehículo:</span> ${repuesto.marca.charAt(0).toUpperCase() + repuesto.marca.slice(1)} ${repuesto.modelo.charAt(0).toUpperCase() + repuesto.modelo.slice(1)} ${repuesto.anio}
                    </p>
                    <p class="text-sm text-gray-600 mb-3">${repuesto.descripcion}</p>
                    <img src="${repuesto.imagen}" alt="${repuesto.nombre}" class="w-full h-32 object-cover rounded-lg">
                `;
                lista.appendChild(item);
            });
        }

        // Eliminar repuesto
        window.eliminarRepuesto = function(id) {
            if (confirm('¿Estás seguro de que deseas eliminar este repuesto?')) {
                repuestosDB = repuestosDB.filter(r => r.id !== id);
                loadRepuestosList();
                saveData();
                showNotification('Repuesto eliminado correctamente');
            }
        }

        // Actualizar selects de repuestos
        function actualizarSelectsRepuestos() {
            const categoriaSelect = document.getElementById('categoriaAdmin');
            const marcaSelect = document.getElementById('marcaAdmin');
            const modeloSelect = document.getElementById('modeloAdmin');
            const anioSelect = document.getElementById('anioAdmin');
            
            categoriaSelect.innerHTML = '';
            categorias.forEach(categoria => {
                const option = document.createElement('option');
                option.value = categoria;
                option.textContent = categoria.split('-').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ');
                categoriaSelect.appendChild(option);
            });
            
            marcaSelect.innerHTML = '';
            marcas.forEach(marca => {
                const option = document.createElement('option');
                option.value = marca;
                option.textContent = marca.charAt(0).toUpperCase() + marca.slice(1);
                marcaSelect.appendChild(option);
            });
            
            anioSelect.innerHTML = '';
            anios.forEach(anio => {
                const option = document.createElement('option');
                option.value = anio;
                option.textContent = anio;
                anioSelect.appendChild(option);
            });
            
            marcaSelect.addEventListener('change', function() {
                const modeloSelect = document.getElementById('modeloAdmin');
                const marca = this.value;
                
                modeloSelect.innerHTML = '';
                if (marca && modelos[marca]) {
                    modelos[marca].forEach(modelo => {
                        const option = document.createElement('option');
                        option.value = modelo;
                        option.textContent = modelo.charAt(0).toUpperCase() + modelo.slice(1);
                        modeloSelect.appendChild(option);
                    });
                }
            });
        }

        // Buscar repuesto
        document.getElementById('buscarBtn').addEventListener('click', function() {
            const categoria = document.getElementById('categoria').value;
            const marca = document.getElementById('marca').value;
            const modelo = document.getElementById('modelo').value;
            const anio = parseInt(document.getElementById('anio').value);
            
            if (!marca && !modelo && !anio && !document.getElementById('buscarInput').value) {
                showNotification('Por favor, selecciona al menos un filtro', true);
                return;
            }
            
            const searchTerm = document.getElementById('buscarInput').value.toLowerCase();
            const resultados = repuestosDB.filter(r => 
                (!categoria || r.categoria === categoria) && 
                (!marca || r.marca === marca) && 
                (!modelo || r.modelo === modelo) && 
                (!anio || r.anio === anio) &&
                (!searchTerm || r.nombre.toLowerCase().includes(searchTerm) || r.descripcion.toLowerCase().includes(searchTerm))
            );
            
            const resultadosSection = document.getElementById('resultados');
            const busquedaTitulo = document.getElementById('busquedaTitulo');
            const resultadosLista = document.getElementById('resultadosLista');
            
            let titulo = [];
            if (marca) titulo.push(marca.toUpperCase());
            if (modelo) titulo.push(modelo.toUpperCase());
            if (anio) titulo.push(anio);
            if (titulo.length === 0) titulo.push('todos los vehículos');
            busquedaTitulo.textContent = titulo.join(' ');
            
            if (resultados.length > 0) {
                resultadosLista.innerHTML = '';
                resultados.forEach(repuesto => {
                    const item = document.createElement('div');
                    item.innerHTML = `
                        <div class="text-center mb-6">
                            <div class="result-image mx-auto">
                                <img src="${repuesto.imagen}" alt="${repuesto.nombre}" class="w-full h-64 object-cover">
                            </div>
                        </div>
                        <h4 class="text-2xl font-semibold text-gray-900 mb-4 text-center">${repuesto.nombre}</h4>
                        <p class="text-gray-700 text-lg leading-relaxed">${repuesto.descripcion}</p>
                        <div class="mt-8 p-6 bg-blue-50 rounded-xl">
                            <p class="text-sm text-blue-800 flex items-center">
                                <i class="fas fa-info-circle mr-3 text-lg"></i>
                                Esta información es de referencia. Consulte con un especialista antes de realizar cualquier reparación.
                            </p>
                        </div>
                    `;
                    resultadosLista.appendChild(item);
                });
                resultadosSection.classList.remove('hidden');
                resultadosSection.scrollIntoView({ behavior: 'smooth' });
            } else {
                resultadosLista.innerHTML = `
                    <div class="text-center py-12">
                        <i class="fas fa-search text-6xl text-gray-400 mb-6 opacity-50"></i>
                        <h4 class="text-2xl font-semibold text-gray-900 mb-4">No se encontró información</h4>
                        <p class="text-gray-600 text-lg">No tenemos datos sobre repuestos que coincidan con tu búsqueda.</p>
                    </div>
                `;
                resultadosSection.classList.remove('hidden');
                resultadosSection.scrollIntoView({ behavior: 'smooth' });
            }
        });

        // Limpiar filtros
        document.getElementById('limpiarBtn').addEventListener('click', function() {
            document.getElementById('categoria').value = '';
            document.getElementById('marca').value = '';
            document.getElementById('modelo').value = '';
            document.getElementById('anio').value = '';
            document.getElementById('buscarInput').value = '';
            
            document.getElementById('modelo').disabled = true;
            
            document.getElementById('resultados').classList.add('hidden');
            
            document.getElementById('categoria').focus();
            
            showNotification('Filtros limpiados');
        });

        // Inicializar
        window.onload = function() {
            loadData();
            llenarSelects();
            if (auth.checkAuth()) {
                cargarTablas();
                actualizarSelectsAdmin();
                loadRepuestosList();
                actualizarSelectsRepuestos();
            }
        };
    </script>
</body>
</html>
